<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Hazel</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: linear-gradient(135deg, #ffe6e6, #fff0f5);
        font-family: 'Arial', sans-serif;
    }
    canvas { display: block; }

    #ui-layer {
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        pointer-events: none;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        align-items: center;
        padding-bottom: 25vh;
    }

    h1 {
        color: #d6336c;
        font-size: 2rem;
        text-shadow: 2px 2px 6px rgba(255,255,255,0.9);
        margin-bottom: 30px;
        text-align: center;
        pointer-events: none;
    }

    .buttons {
        pointer-events: auto;
        display: flex;
        gap: 20px;
    }

    button {
        padding: 15px 45px;
        font-size: 1.3rem;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        transition: transform 0.2s, background 0.2s;
        font-weight: bold;
        box-shadow: 0 6px 10px rgba(0,0,0,0.15);
    }

    #btn-yes { background-color: #ff4d6d; color: white; }
    #btn-no { background-color: #fff; color: #ff4d6d; border: 2px solid #ff4d6d; }

    button:hover { transform: scale(1.05); }

    .particle {
        position: absolute;
        border-radius: 50%;
        pointer-events: none;
        opacity: 0.8;
        animation: floatUp linear forwards;
    }

    @keyframes floatUp {
        0% { transform: translateY(0) rotate(0deg); opacity: 1; }
        100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
    }
</style>
</head>
<body>

<div id="ui-layer">
    <h1 id="main-text">Will you be my Valentine, Hazel?</h1>
    <div class="buttons" id="btn-container">
        <button id="btn-yes">YES</button>
        <button id="btn-no">NO</button>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
    // ==== 3D HEART SETUP ====
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0xffe6e6);

    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.z = 35;

    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    document.body.appendChild(renderer.domElement);

    // Lights
    const ambient = new THREE.AmbientLight(0xffffff, 0.7);
    scene.add(ambient);
    const point = new THREE.PointLight(0xffffff, 0.8);
    point.position.set(15, 20, 25);
    scene.add(point);

    // Heart Geometry
    const heartShape = new THREE.Shape();
    heartShape.moveTo(0, 5);
    heartShape.bezierCurveTo(0, 5, -5, 0, 0, -5);
    heartShape.bezierCurveTo(5, 0, 0, 5, 0, 5);

    const extrudeSettings = { depth: 4, bevelEnabled: true, bevelSegments: 4, steps: 2, bevelSize: 1, bevelThickness: 1 };
    const geometry = new THREE.ExtrudeGeometry(heartShape, extrudeSettings);
    geometry.center();

    const material = new THREE.MeshPhongMaterial({ color: 0xff4d6d, shininess: 80 });
    const heart = new THREE.Mesh(geometry, material);
    scene.add(heart);

    let time = 0;
    function animate() {
        requestAnimationFrame(animate);

        heart.rotation.y += 0.005;

        time += 0.04;
        const pulse = 0.6 + Math.sin(time * 2) * 0.05;
        heart.scale.set(pulse, pulse, pulse);

        renderer.render(scene, camera);
    }
    animate();

    // ==== BUTTON LOGIC ====
    const btnYes = document.getElementById('btn-yes');
    const btnNo = document.getElementById('btn-no');
    const mainText = document.getElementById('main-text');

    btnYes.addEventListener('click', () => {
        mainText.innerText = "YAY! See you soon Hazel! ❤️";
        document.getElementById('btn-container').style.display = 'none';
        startConfetti();
    });

    const moveButton = (e) => {
        const rect = btnNo.getBoundingClientRect();
        const maxX = window.innerWidth - rect.width - 20;
        const maxY = window.innerHeight - rect.height - 20;

        const x = Math.random() * maxX;
        const y = Math.random() * maxY;

        btnNo.style.position = 'fixed';
        btnNo.style.left = `${Math.max(10, x)}px`;
        btnNo.style.top = `${Math.max(10, y)}px`;
    };

    btnNo.addEventListener('mouseover', moveButton);
    btnNo.addEventListener('touchstart', moveButton);

    // ==== RESIZE HANDLER ====
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // ==== CONFETTI ====
    function startConfetti() {
        setInterval(() => {
            const p = document.createElement('div');
            p.className = 'particle';
            p.style.left = Math.random() * 100 + 'vw';
            p.style.top = '100vh';
            const size = Math.random() * 15 + 5;
            p.style.width = size + 'px';
            p.style.height = size + 'px';
            p.style.backgroundColor = `hsl(${Math.random()*50 + 320}, 100%, 70%)`;
            p.style.animationDuration = (Math.random()*3 + 2) + 's';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 5000);
        }, 80);
    }
</script>
</body>
</html>
